The Linux Administration and Supercharge Your Career
https://www.udemy.com/course/linux-administration

### Linux Boot Process

BIOS - basic Input/Output System
POST - Power-On Self Test
Primary purpose is to find and execute the boot loader
It's operating system independent 
Knows about bootable devices:
- Hard drives
- USB drives
- DVD drives
- etc.
The boot device search order can be changed

### Boot Loaders

- LILO
        -Linux Loader
- GRUB
        -Grand Unified Bootloader
        -Replaced LILO
- Boot loaders start the operating systems
- Boot loaders can start the operating system with different options

### Initial RAM Disk
- initrd
  - initial RAM disk
- Temporary filesystem that is loaded from disk and stored in memory
- Contains helpers and modules required to load the permanent OS file system.
- Temporary filesystem that is loaded from disk and stored in memory
- Contains helpers and modules required to load the permanent OS file system.

### The /boot Directory

-/boot
 - Contains the files required to boot Linux
 - initrd
 - kernel
 - boot loader configuration

$ ls -F /boot
The kernel is usually called - vmlinuz or vmlinux
If the kernel is compress its name ends NZ

### Kernel Ring Buffer
- Contains messages from the Linux kernel
- dmesg
- /val/log/dmesg

### Runlevels / Description

0 - Shuts down the system
1, S, s - Single user mode. Used for maintenance.
2 - Multi-user mode with graphical interface.(Debian/Ubuntu)
3 - Multi-user text mode(RedHat/CentOS)
4 - Undefined
5 - Multi-user mode with graphical interface.(RedHat/CentOS)
6 - Reboot
traditionally controled by the init program:
/etc/inittab:

Systemd - alternative to init.
/lib/system/system
ls -l runlevel5.target

### Changing runlevels or target
telinit RUNLEVEL
 telinit 5
systemctl isolate TARTET
 systemctl isolate graphical.target

### Rebooting
sutdown [options] time [message]

sutdown -r 15:30 "rebooting!"
sutdown -r +5 "rebooting soon!"
sutdown -r now

### Poweroff
telinit 0
systemctl isolate poweroff.target
poweroff

END of THE LESSON 1

## The linex boot demo

inside the /boot directory
systemctl isolate graphical.target 
load the graphical interface of the linux from the terminal, nice!

## System Logging

-The syslog standard
-Facilities and severities
-Syslog servers
-Logging rules
-Where logs are stored
-How to generate your own log messages
-Rotating log files

### The Syslot Standard
-Aids in the processing of messages.
-Allows logging to be centrally controlled.
-Uses facilities and severities to categorize messages.

Number Keyword Description
0 kernel    kernel messages
1 user      user-level messages
2 mail      mail system
3 daemon    system daemons
4 auth      security/authorization messages
5 syslog    messages generated by syslogd
6 lpr       line printer sybsystem
7 news      network news subsystem
8 uucp      UUCP subsystem
9 clock     daemon
10 authpriv security/authorization messages

Number Keyword Description
11 ftp      FTP daemon
12 -        NTP subsystem
13 -        log audit
14 -        log alert
15 cron     clock daemon
16 local0   local use 0 (local0)
17 local1   local use 0 (local1)
18 local2   local use 0 (local2)
19 local3   local use 0 (local3)
...
23 local7   local use 0 (local7)

Code Severity   Keyword       Description
0    Emergency  emerg (panic) System is unstable
1    Alert      alert         Action must be taken immediately
2    Critical   crit          Critical conditions 
3    Error      err(error)    Error conditions
4    Warning    warning(warn) Warning conditions
5    Notice     notice        Normal but significant condition
6    Info       info          Informational messages
7    Debug      debug         Debug-level messages

### Syslog Servers
- Process syslog messages based on rules.
- syslogd
- rsyslog
- syslog-ng
(alternatives)

### rsyslog

/etc/rsyslog.conf:

$IncludeConfig /etc/rsyslog.d/*.conf

### Loging Rules
- Selector field
 -FACILITY.SEVERITY
 -mail.*
 -mail
 -FACILITY.none
 -FACILITY_1.SEVERITY;FACILITY_2.SEVERITY
-Action field
 -Determines how a message is processed

### Example Logging Rule
mail.*  /var/log/mail.log

### Caching vs Non-caching

- Caching is used if the path starts with a hyphen
 - mail.info    -/var/log/mail.info
- You may lose some messages during a system crash if you are usinhg caching mode
- Using caching mode can improve I/O performance.

### Example Logging Rules

mail.info   -/var/log/mail.info
mail.warn   -/var/log/mail.warn
mail.err    /var/log/mail.err

### Example Logging Rules

auth,authpriv.*                 /var/log/auth.log
*.*;auth.none,authpriv.none     -/var/log/syslog

### Example Logging Rules

*.info:mail.none;authpriv.none;cron.none /var/log/messages

### logger

logger [options] message

Options:
-p FACILITY.SEVERITY
-t TAG

$ logger -p mail.info -t mailtest "Test."
$ sudo tail -l /var/log/mail.log
Apr 4 14:33:16 linuxsvr mailtest: Test.

### logrotate

to rotate, remove, rotate, mail the log files

/etc/logrotate.conf

include /etc/logrotate.d

Example of the logrotate.conf file:

weekley
rotate 4
create
compressed
include /etc/logrotate.d

Test the logrotate configuration
'#' logrotate -fv /etc/logrotate.conf

## Partitions

-Disks can be divided into parts, called partitions
-Partitions allow you to separate data.
-Partitons schemes
 1)OS, 2)Applications, 3)User, 4)Swap
 1)OS, 2)User home directories
 As a system administrator, you decide.

### Partitioning
- Can protect the overall system.
- Keep users from creating outages by usin a home directory partition.

$ df -h

### MBR
- Master Boot Record
- Can only address 2 TB of disk space
- Being phased out by GPT
 - DPT = GUID Partition Table
- 4 Primary Partitions
- Extended partitions allow you to create logical partitions

###GPT
- GPT = GUID Partition Table
- GUID = Global Unique Identifier
- Replacing the MBR partitioning scheme 
- Part of UEFI
- UEFI = Unified Extensible Firmware Interface
- UEFI is replacing BIOS
- Supports up to 128 partitions
- Supports up to 9,4 ZB disk sizes
- Not supported by older operating systems
- May require newer or special tools

### Mount Points

- A directory used to access the data on a partition
- /(slash) is always a mount point
- /home
 - /home/jason is on the partition mounted on /home
- /export/home
 - /export/jome/jason

### Mounting over existing data

mkdir /home/sarah
mount /dev/sdb2 /home
* You will not be able to see /home/sarah now

unmount /home
* You can now see /home/sarah again.


